{"is_source_file": true, "format": "JavaScript (JSX/React)", "description": "This file defines a React component CanvasWorkspace that provides a client-side image composition workspace supporting multiple image uploads, layer management, transformations such as move, resize, rotate, cropping, and clearing. It includes UI controls for uploading images, selecting layers, and manipulating them with drag-and-drop and transform handles.", "external_files": ["react"], "external_methods": ["URL.createObjectURL", "URL.revokeObjectURL", "Object.assign", "window.addEventListener", "window.removeEventListener"], "published": ["CanvasWorkspace"], "classes": [], "methods": [{"name": "computeFit", "description": "Calculates optimal display size for an image to fit within maximum dimensions while maintaining aspect ratio."}, {"name": "handleFiles", "description": "Handles uploading and processing of image files into layers with scaled sizes and positioned near the center."}, {"name": "onFileInputChange", "description": "Handles change event for file input element to process selected image files."}, {"name": "onDrop", "description": "Handles drag-and-drop of files into the workspace, processing image uploads."}, {"name": "onDragOver", "description": "Prevents default behavior to allow drop events."}, {"name": "startResize", "description": "Initiates resizing of a layer using resize handle and records starting state."}, {"name": "startRotate", "description": "Initiates rotation of a layer, capturing the initial angle and mouse position."}, {"name": "startCropMode", "description": "Enters crop mode for a specific layer, initializing crop rectangle."}, {"name": "applyCrop", "description": "Bakes in the crop rectangle into a new image source, updating the layer with cropped bitmap."}, {"name": "onContainerPointerMove", "description": "Handles pointer movement during dragging, resizing, rotating, or cropping, updating layer states accordingly."}, {"name": "onContainerPointerUp", "description": "Finalizes transformations or dragging operations, resetting relevant state."}, {"name": "clearCanvas", "description": "Removes all layers and revokes object URLs."}, {"name": "getCropBoxRelativeToLayer", "description": "Calculates the crop rectangle in layer coordinate space considering current crop box and layer bounds."}, {"name": "CanvasWorkspace()", "scope": "", "scopeKind": "", "description": "unavailable"}], "search-terms": ["CanvasWorkspace", "layer model", "drag-and-drop images", "image cropping", "resize handles", "rotation control", "layer selection", "offscreen canvas crop", "object URL management", "canvas layer manipulation"], "state": 2, "file_id": 13, "knowledge_revision": 32, "git_revision": "8fae1bd2f1908e439455a7b54353ec8e4fc4385e", "revision_history": [{"27": ""}, {"32": "8fae1bd2f1908e439455a7b54353ec8e4fc4385e"}], "ctags": [{"_type": "tag", "name": "CanvasWorkspace", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^function CanvasWorkspace() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "RenderCropUI", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^  const RenderCropUI = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "containerRef", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^        ref={containerRef}$/", "language": "JavaScript", "kind": "field", "scope": "ref", "scopeKind": "class"}, {"_type": "tag", "name": "layer", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^  const RenderTransformControls = ({ layer }) => {$/", "language": "JavaScript", "kind": "field", "scope": "CanvasWorkspace.RenderTransformControls", "scopeKind": "class"}, {"_type": "tag", "name": "lx", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^    const lx = selectedLayer.x + rel.x;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ly", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^    const ly = selectedLayer.y + rel.y;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "onContainerPointerMove", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^          onPointerMove={onContainerPointerMove}$/", "language": "JavaScript", "kind": "field", "scope": "onPointerMove", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerPointerUp", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^          onPointerLeave={onContainerPointerUp}$/", "language": "JavaScript", "kind": "field", "scope": "onPointerLeave", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerPointerUp", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^          onPointerUp={onContainerPointerUp}$/", "language": "JavaScript", "kind": "field", "scope": "onPointerUp", "scopeKind": "class"}, {"_type": "tag", "name": "onDragOver", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^        onDragOver={onDragOver}$/", "language": "JavaScript", "kind": "field", "scope": "onDragOver", "scopeKind": "class"}, {"_type": "tag", "name": "onDrop", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^        onDrop={onDrop}$/", "language": "JavaScript", "kind": "field", "scope": "onDrop", "scopeKind": "class"}, {"_type": "tag", "name": "onFileInputChange", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^            onChange={onFileInputChange}$/", "language": "JavaScript", "kind": "field", "scope": "multiple", "scopeKind": "class"}, {"_type": "tag", "name": "rel", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^    const rel = getCropBoxRelativeToLayer();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "selectedLayer", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^          {selectedLayer && <RenderTransformControls layer={selectedLayer} \\/>}$/", "language": "JavaScript", "kind": "field", "scope": "selectedLayer", "scopeKind": "class"}, {"_type": "tag", "name": "styles", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^            style={styles.controlBtnGhost}$/", "language": "JavaScript", "kind": "field", "scope": "style", "scopeKind": "class"}, {"_type": "tag", "name": "styles", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^            style={styles.controlBtn}$/", "language": "JavaScript", "kind": "field", "scope": "style", "scopeKind": "class"}, {"_type": "tag", "name": "styles", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^          style={styles.workspace}$/", "language": "JavaScript", "kind": "field", "scope": "style", "scopeKind": "class"}, {"_type": "tag", "name": "styles", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^        style={styles.workspaceWrapper}$/", "language": "JavaScript", "kind": "field", "scope": "style", "scopeKind": "class"}, {"_type": "tag", "name": "styles", "path": "/home/kavia/workspace/code-generation/interactive-graphics-creator-184117-184126/graphics_frontend/src/components/CanvasWorkspace.jsx", "pattern": "/^    <div style={styles.root}>$/", "language": "JavaScript", "kind": "field", "scope": "AnonymousClass1c62698f0101", "scopeKind": "class"}], "hash": "0de819fd124cce1656a8d7c6aad41b6c", "format-version": 4, "code-base-name": "graphics_frontend", "filename": "graphics_frontend/src/components/CanvasWorkspace.jsx", "fields": [{"name": "ref={containerRef}", "scope": "ref", "scopeKind": "class", "description": "unavailable"}, {"name": "const RenderTransformControls = ({ layer }) => {", "scope": "CanvasWorkspace.RenderTransformControls", "scopeKind": "class", "description": "unavailable"}, {"name": "onPointerMove={onContainerPointerMove}", "scope": "onPointerMove", "scopeKind": "class", "description": "unavailable"}, {"name": "onPointerLeave={onContainerPointerUp}", "scope": "onPointerLeave", "scopeKind": "class", "description": "unavailable"}, {"name": "onPointerUp={onContainerPointerUp}", "scope": "onPointerUp", "scopeKind": "class", "description": "unavailable"}, {"name": "onDragOver={onDragOver}", "scope": "onDragOver", "scopeKind": "class", "description": "unavailable"}, {"name": "onDrop={onDrop}", "scope": "onDrop", "scopeKind": "class", "description": "unavailable"}, {"name": "onChange={onFileInputChange}", "scope": "multiple", "scopeKind": "class", "description": "unavailable"}, {"name": "{selectedLayer && <RenderTransformControls layer={selectedLayer} \\/>}", "scope": "selectedLayer", "scopeKind": "class", "description": "unavailable"}, {"name": "style={styles.controlBtnGhost}", "scope": "style", "scopeKind": "class", "description": "unavailable"}, {"name": "style={styles.controlBtn}", "scope": "style", "scopeKind": "class", "description": "unavailable"}, {"name": "style={styles.workspace}", "scope": "style", "scopeKind": "class", "description": "unavailable"}, {"name": "style={styles.workspaceWrapper}", "scope": "style", "scopeKind": "class", "description": "unavailable"}, {"name": "<div style={styles.root}>", "scope": "AnonymousClass1c62698f0101", "scopeKind": "class", "description": "unavailable"}]}